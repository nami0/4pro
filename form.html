<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>サンプル</title>

    <!-- ライブラリを読み込む(firebase.js) -->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-database.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
	 https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-analytics.js"></script>

    <script>
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      var firebaseConfig = {
	  apiKey: "AIzaSyBLv8DhC9xe-Em-yQZsHXyczXs1Io_rSnU",
	  authDomain: "use-speech-api-f563c.firebaseapp.com",
	  databaseURL: "https://use-speech-api-f563c-default-rtdb.firebaseio.com",
	  projectId: "use-speech-api-f563c",
	  storageBucket: "use-speech-api-f563c.appspot.com",
	  messagingSenderId: "109548445034",
	  appId: "1:109548445034:web:6407a2596b561893041913",
	  measurementId: "G-N0SGSRQNQL"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    </script>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <link rel="stylesheet" href="./style.css">
  </head>
  <body>
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

    <h1>入力フォーム</h1>
    <div>
      <form>
      人数<input type="number" id="number" min="1" value="1">
      No.<input type="number" id="user" min="1">
      名前<input type="text" id="name"><br>
      あなたは議長ですか？
      <input type="checkbox" id="facilitator">
      </form>
      <button id="send" onClick="send();">送信</button>
      <div id="output"></div>
    </div>
    <script type="text/javascript">
      var database = firebase.database();
      let room = "speech_room";
      const number = document.getElementById("number");
      const user = document.getElementById("user");
      const name = document.getElementById("name");
      const facilitator = document.getElementById("facilitator");
      const output = document.getElementById("output");
      
      function send(){
          if (user.value == null || number.value == null || name.value == ""){
              alert("人数,No.,名前を入力してください");    //エラーメッセージを出力
          }else{
	      database.ref(room+'/'+"number").set({
		  number : number.value,
	      });
	      if(facilitator.checked){
		  database.ref(room+'/'+"user"+user.value).set({
		      name: name.value,
		      speechVolume: 0,
		      script: '',
		      facilitator: true,
		  });
		  output.innerHTML = '<a href="form2.html">次へ</a>';
	      } else {
		  database.ref(room+'/'+"user"+user.value).set({
		      name: name.value,
		      speechVolume: 0,
		      script: '',
		      facilitator: false,
		  });
		  output.innerHTML = '<a href="index2.html">次へ</a>';
	      }
          }
      }
    </script>
  </body>
</html>
